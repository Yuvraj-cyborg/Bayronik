# Bayronik TUI Visualization Guide

**Learn how to read and interpret the baryonic field emulator interface**

---

## Quick Start

Launch the interactive TUI:
```bash
cd ~/Projects/bayronik
./run_bayronik.sh
```

Wait 10-15 seconds for loading, then you'll see three side-by-side panels showing matter distributions!

---

## Understanding the Interface

### **Main Layout**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Bayronik: Baryonic Field Emulator                        ‚îÇ
‚îÇ Model: Trained on 1000 LH sims | Demo: 15 CV sims | ...     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Controls: Simulation 5/15 | [‚Üê/‚Üí] Navigate | [r] Random     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ LEFT PANEL        ‚îÇ CENTER PANEL      ‚îÇ RIGHT PANEL       ‚îÇ
‚îÇ Input: Mcdm       ‚îÇ Output: Mtot      ‚îÇ Baryonic Œî       ‚îÇ
‚îÇ (Dark Matter)     ‚îÇ (Total Matter)    ‚îÇ (The Effect)      ‚îÇ
‚îÇ Œº=25.78 œÉ=2.45    ‚îÇ Œº=25.97 œÉ=2.51    ‚îÇ Œº=0.18 œÉ=0.34     ‚îÇ
‚îÇ                   ‚îÇ                   ‚îÇ                   ‚îÇ
‚îÇ   ‚ñë‚ñë‚ñë‚ñí‚ñì‚ñà          ‚îÇ   ‚ñë‚ñë‚ñë‚ñí‚ñì‚ñà          ‚îÇ   ‚ñë‚ñë‚ñí‚ñí‚ñë           ‚îÇ
‚îÇ   ‚ñë‚ñí‚ñì‚ñà‚ñà‚ñÄ          ‚îÇ   ‚ñë‚ñí‚ñì‚ñà‚ñà‚ñÄ          ‚îÇ   ‚ñí‚ñì‚ñà‚ñë‚ñë           ‚îÇ
‚îÇ   ‚ñí‚ñì‚ñà‚ñà‚ñà‚ñÑ          ‚îÇ   ‚ñí‚ñì‚ñà‚ñà‚ñà‚ñÑ          ‚îÇ   ‚ñë‚ñà‚ñí‚ñë‚ñë           ‚îÇ
‚îÇ   ‚ñë‚ñë‚ñí‚ñì‚ñà           ‚îÇ   ‚ñë‚ñë‚ñí‚ñì‚ñà           ‚îÇ   ‚ñë‚ñë‚ñë‚ñë‚ñë           ‚îÇ
‚îÇ                   ‚îÇ                   ‚îÇ                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîµ Left Panel: Input (Dark Matter - Mcdm)

### **What It Shows**
- **Cold dark matter** distribution from gravity-only N-body simulations
- The "skeleton" of cosmic structure
- Pure gravitational effects, NO baryonic physics

### **Physical Meaning**
- Represents ~**85% of all matter** in the universe
- Invisible to telescopes, only detected through gravity
- Sets the large-scale structure (filaments, halos, voids)

### **What to Look For**
- **Red/Yellow blobs** = Dark matter halos (future galaxies/clusters)
- **White filaments** = Cosmic web connecting halos
- **Dark gray regions** = Cosmic voids (empty space)

### **Statistics**
```
Œº = 25.78  ‚Üí Average log-density
œÉ = 2.45   ‚Üí Structure variation (higher = more contrast)
‚áµ [18, 32] ‚Üí Range from voids to densest peaks
```

---

## üü¢ Center Panel: Output (Total Matter - Mtot)

### **What It Shows**
- **Total matter** = Dark matter + baryons (gas + stars)
- What the **ML model predicts** after learning baryonic physics
- What observers **actually measure** through gravitational lensing

### **Physical Meaning**
- Complete matter distribution including:
  - Dark matter (85%)
  - Gas (13%)
  - Stars (2%)
- Includes effects of:
  - Gas cooling
  - Star formation
  - Supernova feedback
  - AGN (black hole) feedback

### **What to Look For**
- **Sharper peaks** than left panel = gas concentrated in centers
- **Brighter halos** = baryons enhanced density
- **Slightly different structure** = baryonic effects visible

### **How It Differs from Input**
- Usually **similar** (dark matter dominates!)
- Subtle changes: ~10-30% density increase in halos
- Some halos may be **less dense** in centers (AGN feedback)

### **Statistics**
```
Œº = 25.97  ‚Üí Slightly higher than input (baryons add mass)
œÉ = 2.51   ‚Üí Often slightly higher (baryons create sharper features)
```

**Typical increase**: Œº(Mtot) - Œº(Mcdm) = **0.1 to 0.3** (expected!)

---

## üî¥ Right Panel: Baryonic Effect (Œî)

### **What It Shows**
- **Œî = Mtot - Mcdm** (in log-space)
- The **pure baryonic correction**
- Where feedback processes **redistribute** matter

### **Physical Meaning**
This panel reveals where baryonic physics changes the matter distribution:
- **Positive Œî (bright)**: Baryons increase density
- **Negative Œî (dark)**: Baryons decrease density
- **Zero Œî (gray)**: No baryonic effect

### **What to Look For**

#### **Pattern 1: Cooling Flow** (Positive Center)
```
Œî panel shows: Bright blob ‚ñì‚ñà
Physics: Gas cools and falls into halo center
Where: Low-mass halos (~10¬π¬≤ M‚òâ)
```

#### **Pattern 2: AGN Feedback** (Negative Center)
```
Œî panel shows: Dark center ‚ñë, bright edges
Physics: Black hole ejects gas from core
Where: Massive halos (>10¬π¬≥ M‚òâ)
```

#### **Pattern 3: Filamentary Structure**
```
Œî panel shows: Linear bright features
Physics: Baryons trace cosmic web
Where: Along filaments connecting halos
```

### **Statistics Interpretation**

```
Œº = 0.18  ‚Üí Mean correction
```
**What this means in linear space**:
- ŒîŒº = 0.18 ‚Üí exp(0.18) = 1.20
- Total matter is **20% more** than dark matter
- **This is CORRECT!** (15-20% expected)

```
œÉ = 0.34  ‚Üí Variation in correction
```
- Higher œÉ = more diverse baryonic effects
- Some regions enhanced, others depleted
- Sign of realistic physics!

```
‚áµ [-2.5, +3.5]  ‚Üí Range of effects
```
- Negative values = AGN blew gas out
- Positive values = Gas cooled and concentrated
- Large range = model captures both effects

---

## Color Scheme (All Panels)

All three panels use the **same color mapping** for matter density:

### **Color Table**

| Color | Symbol | Brightness | Density Range | Physical Region |
|-------|--------|------------|---------------|-----------------|
| **Dark Gray** | ‚ñë | Darkest | 0-20% | Cosmic voids |
| **Gray** | ‚ñí | Dark | 20-40% | Underdense regions |
| **White** | ‚ñì | Medium | 40-60% | Cosmic web filaments |
| **Yellow** | ‚ñà | Bright | 60-80% | Dense halos, groups |
| **Red** | ‚ñà | Brightest | 80-100% | Massive galaxy clusters |

### **Enhanced Character Set**

For smoother gradients, we use **16 levels**:
```
‚ñë ‚ñí ‚ñì ‚ñà ‚ñÄ ‚ñÑ ‚ñå ‚ñê ‚ñ† ‚ñ™ ‚óè ‚óÜ ‚óà ‚òÖ
```

Each character represents a specific density bin for fine detail.

### **Reading the Colors**

**In Input/Output Panels**:
- More red/yellow = denser regions (galaxy clusters)
- More white = average density (cosmic web)
- More gray = low density (voids)

**In Œî Panel** (difference):
- Red/Yellow = Positive correction (baryons added mass)
- White = Small correction (¬±10%)
- Gray/Dark = Negative correction (feedback removed mass)

---

## üìä Statistics Bar Explained

Each panel title shows real-time statistics:

```
Input: Dark Matter (Mcdm) ‚îÇ Œº=25.784 œÉ=2.451 ‚áµ[18.23, 32.45]
```

### **Œº (Mu) - Mean Value**
- **What it is**: Average log-density across entire 256√ó256 map
- **Typical range**: 18-30
- **Interpretation**:
  - Œº ‚âà 20: Low-density universe
  - Œº ‚âà 25: Typical cosmic density
  - Œº ‚âà 30: High-density structures

**Compare panels**:
- `Œº(Mtot) > Œº(Mcdm)` ‚Üí Baryons add mass overall 
- `Œº(Mtot) ‚âà Œº(Mcdm)` ‚Üí Weak baryonic effects
- Difference should be **0.1 to 0.3** (10-30% increase)

### **œÉ (Sigma) - Standard Deviation**
- **What it is**: How much density varies across the map
- **Typical range**: 1.5-4.0
- **Interpretation**:
  - High œÉ: Strong structure (deep voids + dense clusters)
  - Low œÉ: Smooth distribution
  - œÉ of Œî panel: Strength of baryonic effects

### **‚áµ [min, max] - Value Range**
- **What it is**: Minimum and maximum density values
- **Shows**: Dynamic range from voids to peaks
- **Interpretation**:
  - Large range (15+ difference): High contrast
  - Small range: Smooth field

**For Œî panel**:
- Negative min: AGN feedback present
- Positive max: Strong cooling flows
- Large range: Diverse baryonic physics

---

## Interactive Controls

### **Keyboard Commands**

| Key | Action | Description |
|-----|--------|-------------|
| `‚Üí` | Next | Move to next simulation |
| `‚Üê` | Previous | Go back one simulation |
| `n` | Next | Alternative to ‚Üí |
| `p` | Previous | Alternative to ‚Üê |
| `r` | Random | Jump to random simulation |
| `q` | Quit | Exit application |

### **Navigation Tips**

**Sequential browsing** (‚Üí/‚Üê):
- Good for comparing similar parameter sets
- CV dataset: Same cosmology, different random seeds
- See how structure varies with different initial conditions

**Random jumping** (r):
- Explore diversity in dataset
- Find interesting examples quickly
- Compare very different structures

**Current simulation indicator**:
```
Simulation 5/15
```
Shows which of 15 local CV samples you're viewing.

---

## üî¨ Physical Interpretation Guide

### **Scenario 1: Typical Halo with Cooling**

**What you see**:
```
LEFT:   ‚ñà‚ñà‚ñà (smooth red blob)
CENTER: ‚ñà‚ñà‚ñà (brighter red blob)  
RIGHT:  ‚ñë‚ñà‚ñë (bright center)
```

**Physics**:
1. Dark matter creates gravitational well (LEFT)
2. Gas falls in and cools (physics)
3. Density increases in center (CENTER)
4. Œî shows positive enhancement (RIGHT)

**Parameters**: Low-mass halo (~10¬π¬≤ M‚òâ), moderate cooling

---

### **Scenario 2: AGN Feedback Dominant**

**What you see**:
```
LEFT:   ‚ñà‚ñà‚ñà (massive halo)
CENTER: ‚ñà‚ñë‚ñà (hollow center, dense edges)
RIGHT:  ‚ñë‚ñà‚ñë (negative center, positive edges)
```

**Physics**:
1. Massive dark matter halo (LEFT)
2. Supermassive black hole heats gas (physics)
3. Gas ejected from center to outer regions (CENTER)
4. Œî negative in core, positive at edges (RIGHT)

**Parameters**: High-mass halo (>10¬π¬≥ M‚òâ), strong AGN

---

### **Scenario 3: Cosmic Web Structure**

**What you see**:
```
ALL PANELS: Long white/yellow filaments connecting red nodes
```

**Physics**:
1. Matter flows along filaments to nodes
2. Baryons cool faster in denser regions
3. Enhanced contrast in filaments
4. Œî shows mild enhancement along web

**Parameters**: Large-scale structure, moderate feedback

---

### **Scenario 4: Weak Feedback (Similar Panels)**

**What you see**:
```
LEFT ‚âà CENTER (almost identical)
RIGHT: Mostly gray with faint structure
```

**Physics**:
1. Low baryon fraction simulation
2. OR early redshift (z > 2)
3. OR weak feedback parameters
4. Baryons follow dark matter passively

**Parameters**: Weak AGN/SN feedback, or high-z

## Interpretation

### **Comparing Statistics Across Panels**

#### **Mean Ratio Analysis**:
```python
ŒîŒº = Œº(Mtot) - Œº(Mcdm)
Linear ratio = exp(ŒîŒº)
Baryon fraction = (ratio - 1) / ratio
```

**Example**:
```
Œº(Mcdm) = 25.78
Œº(Mtot) = 25.97
ŒîŒº = 0.19
‚Üí Linear ratio = exp(0.19) = 1.209
‚Üí Baryon fraction = 0.209/1.209 = 17.3% 
```

#### **Variance Comparison**:
```
If œÉ(Mtot) > œÉ(Mcdm):
  ‚Üí Baryons create sharper features
  ‚Üí Cooling dominates in this simulation

If œÉ(Mtot) < œÉ(Mcdm):
  ‚Üí Baryons smooth structure  
  ‚Üí Feedback dominates
```

### **Reading the Œî Histogram** (mental model)

Imagine the Œî panel histogram:

```
     ‚îÇ     ‚ï±‚ï≤
     ‚îÇ    ‚ï±  ‚ï≤       Peak near 0 (most regions unaffected)
Count‚îÇ   ‚ï±    ‚ï≤      Long tail to right (cooling)
     ‚îÇ  ‚ï±      ‚ï≤___  Short tail to left (feedback)
     ‚îÇ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí Œî value
       -1  0   1   2
```

- **Symmetric**: Balanced cooling and feedback
- **Right-skewed**: Cooling dominant
- **Left-skewed**: Feedback dominant

---

## üåü Dataset Information

### **What You're Viewing**

**Model Training**:
- Trained on **1000 LH (Latin Hypercube) simulations**
- Varied cosmology: Œ©‚Çò, œÉ‚Çà, h
- Varied baryonic physics: A_AGN, A_SN

**Local Demo**:
- Viewing **15 CV (Cosmic Variance) simulations**
- Same cosmology, different random seeds
- Shows structure variation from initial conditions

**Why CV for demo?**:
- Smaller dataset (~300 MB vs 15 GB)
- Loads quickly on local machine
- Still shows diverse structures
- Model trained on LH works perfectly on CV!


## Further Reading

### **Understanding the Science**

- **CAMELS Project**: https://camels.readthedocs.io
- **Weak Lensing Review**: arXiv:1001.1739
- **Baryonic Effects**: arXiv:1403.4186
- **Field-Level Emulation**: arXiv:2211.09976

### **Technical Details**

- **U-Net Architecture**: arXiv:1505.04597
- **TorchScript**: pytorch.org/docs/stable/jit.html
- **Log-space Training**: Stabilizes learning for high dynamic range

### **Related Projects**

- **CAMELS-Multifield Emulator**: arXiv:2301.10515
- **GPemu**: Field-level emulator (arXiv:2408.10429)
- **CosmoPower**: Power spectrum emulator

---

## üéì Citation

If you use Bayronik in your research, please cite:

```bibtex
@software{bayronik2025,
  author = {Yuvraj Biswal},
  title = {Bayronik: Baryonic Field Emulator for Weak Lensing},
  year = {2025},
  url = {https://github.com/yourusername/bayronik}
}
```

---

## üìß Contact

**Questions? Suggestions? Collaborations?**

- **Author**: Yuvraj Biswal
- **Email**: yuvrajbiswalofficial@gmail.com
- **Project**: Bayronik v1.0

---

**Last Updated**: October 2025  
**Status**: Production Ready  
**License**: MIT

